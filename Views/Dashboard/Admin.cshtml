@{
    ViewData["Title"] = "Administratoriaus Puslapis";
    var communities = ViewBag.Communities as List<CommunalSystem.Models.Community> ?? new List<CommunalSystem.Models.Community>();
    var services = ViewBag.Services as List<CommunalSystem.Models.Service> ?? new List<CommunalSystem.Models.Service>();
    var users = ViewBag.Users as List<CommunalSystem.Models.User> ?? new List<CommunalSystem.Models.User>();
    var message = ViewBag.Message ?? "Šis puslapis skirtas administratoriui valdyti bendrijas, paslaugas ir vartotojus.";
    <link href="~/css/styles.css" rel="stylesheet" />
}
<div class="dashboard-container">
    @if (TempData["Success"] != null)
    {
        <div class="success">@TempData["Success"]</div>
    }
    @if (TempData["Error"] != null)
    {
        <div class="error">@TempData["Error"]</div>
    }
    <h1>Administratoriaus Puslapis</h1>
    <p>@message</p>
    <form method="post" action="@Url.Action("Logout", "Account")">
    @Html.AntiForgeryToken()
    <button type="submit">Logout</button>
    </form>
    <div class="card">
        <h2>Bendrijos</h2>
        <ul>
            @foreach (var community in communities)
            {
                <li>
                    <span>@community.Name</span>
                    <form method="post" action="@Url.Action("EditCommunity", "Dashboard")" style="display:inline-block;">
                        <input type="hidden" name="communityId" value="@community.Id" />
                        <input type="text" name="name" value="@community.Name" />
                        <button type="submit">Redaguoti</button>
                    </form>
                    <a href="@Url.Action("DeleteCommunity", "Dashboard", new { communityId = community.Id })" style="color:red; margin-left:10px;">Ištrinti</a>
                </li>
            }
        </ul>
        <form method="post" action="@Url.Action("CreateCommunity", "Dashboard")">
            <label>Naujos bendrijos pavadinimas:</label>
            <input type="text" name="name" />
            <button type="submit">Sukurti</button>
        </form>
        <h2>Paslaugos</h2>
        <ul>
            @foreach (var service in services)
            {
                <li>
                    <span>@service.Name</span>
                    <form method="post" action="@Url.Action("EditService", "Dashboard")" style="display:inline-block;">
                        <input type="hidden" name="serviceId" value="@service.Id" />
                        <input type="text" name="name" value="@service.Name" />
                        <button type="submit">Redaguoti</button>
                    </form>
                    <a href="@Url.Action("DeleteService", "Dashboard", new { serviceId = service.Id })" style="color:red; margin-left:10px;">Ištrinti</a>
                </li>
            }
        </ul>
        <form method="post" action="@Url.Action("CreateService", "Dashboard")">
            <label>Naujos paslaugos pavadinimas:</label>
            <input type="text" name="name" />
            <button type="submit">Sukurti</button>
        </form>
        <h2>Vartotojai</h2>
        <ul>
            @foreach (var user in users)
            {
                <li>
                    <span>@user.FirstName @user.LastName (@user.Role)</span>
                    <a href="@Url.Action("DeleteUser", "Dashboard", new { userId = user.Id })" style="color:red; margin-left:10px;">Ištrinti</a>
                </li>
            }
        </ul>
        <div></div>
        <div></div>
        <div></div>
        <form method="post" action="@Url.Action("CreateUser", "Dashboard")">
            <label>Vaidmuo:</label>
            <select name="role">
                <option value="manager">Vadybininkas</option>
                <option value="resident">Gyventojas</option>
            </select>
            <label>Vardas (vartotojo vardas):</label>
            <input type="text" name="firstName" />
            <label>Pavardė (slaptažodis):</label>
            <input type="text" name="lastName" />
            <label>Bendrijos ID (gyventojams):</label>
            <input type="number" name="communityId" />
            <button type="submit">Sukurti</button>
        </form>
    </div>
</div>